<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - VulnFriend</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #333;
        }
        
        .user-info {
            background: rgba(0, 255, 0, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .feature-box {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #444;
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s;
        }
        
        .feature-box:hover {
            border-color: var(--matrix-green);
            transform: translateY(-2px);
        }
        
        .feature-box h3 {
            color: var(--hacker-green);
            margin-top: 0;
        }
        
        .logout-btn {
            background: #ff5555;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Ubuntu Mono', monospace;
        }
        
        .admin-link {
            background: rgba(255, 215, 0, 0.2);
            border: 1px solid gold;
            padding: 10px;
            border-radius: 5px;
            display: inline-block;
            margin-top: 10px;
        }
        
        .exploit-panel {
            background: rgba(255, 0, 0, 0.1);
            border: 1px dashed #ff5555;
            padding: 20px;
            margin-top: 30px;
            border-radius: 8px;
        }
        
        .exploit-panel h3 {
            color: #ff5555;
        }
        
        .exploit-form {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .exploit-form input {
            flex: 1;
            padding: 10px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #555;
            color: white;
        }
        
        .exploit-form button {
            padding: 10px 20px;
            background: #ff5555;
            color: white;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="terminal">
        <div class="terminal-header">
            <div class="buttons">
                <span class="close"></span>
                <span class="minimize"></span>
                <span class="maximize"></span>
            </div>
            <span class="title">VulnFriend - Dashboard</span>
        </div>
        
        <div class="terminal-body">
            <div class="dashboard-header">
                <h1>Welcome, {{ username }}! üëã</h1>
                <form action="/logout" method="POST" style="display: inline;">
                    <button type="button" class="logout-btn" onclick="location.href='/'">Logout</button>
                </form>
            </div>
            
            <div class="user-info">
                <p><strong>User ID:</strong> Retrieved from session</p>
                <p><strong>Hint:</strong> Try accessing /profile/1 or /profile/2</p>
                {% if session.get('is_admin') %}
                <div class="admin-link">
                    <a href="/admin" style="color: gold;">‚ö° Admin Panel Access</a>
                </div>
                {% endif %}
            </div>
            
            <div class="features-grid">
                <div class="feature-box">
                    <h3>üîç Search Users</h3>
                    <p>Try SQL injection in search</p>
                    <div class="exploit-form">
                        <input type="text" id="searchInput" placeholder="Search users...">
                        <button onclick="searchUsers()">Search</button>
                    </div>
                    <div id="searchResults" style="margin-top: 10px; color: #888;"></div>
                </div>
                
                <div class="feature-box">
                    <h3>üì° Ping Tool</h3>
                    <p>Potential command injection</p>
                    <div class="exploit-form">
                        <input type="text" id="pingInput" placeholder="IP or hostname">
                        <button onclick="pingHost()">Ping</button>
                    </div>
                    <div id="pingResults" style="margin-top: 10px; color: #888;"></div>
                </div>
                
                <div class="feature-box">
                    <h3>üí∞ Transfer Money</h3>
                    <p>CSRF vulnerable form</p>
                    <form action="/transfer" method="POST" class="exploit-form">
                        <input type="text" name="amount" placeholder="Amount">
                        <input type="text" name="to" placeholder="To User ID">
                        <button type="submit">Transfer</button>
                    </form>
                    <p style="font-size: 0.9em; color: #666;">No CSRF token protection!</p>
                </div>
                
                <div class="feature-box">
                    <h3>üìÅ File Upload</h3>
                    <p>Unrestricted file upload</p>
                    <form action="/upload" method="POST" enctype="multipart/form-data">
                        <input type="file" name="file" style="margin-bottom: 10px;">
                        <button type="submit" style="width: 100%;">Upload File</button>
                    </form>
                </div>
            </div>
            
            <div class="exploit-panel">
                <h3>üéØ Practice Exploits</h3>
                <p>Try these payloads:</p>
                <ul>
                    <li>SQLi: <code>' UNION SELECT NULL,NULL,NULL,NULL --</code></li>
                    <li>XSS: <code>&lt;script&gt;alert('XSS')&lt;/script&gt;</code></li>
                    <li>Command Injection: <code>127.0.0.1; cat /etc/passwd</code></li>
                    <li>IDOR: Change <code>/profile/1</code> to <code>/profile/2</code></li>
                </ul>
            </div>
        </div>
    </div>
    
    <script>
        function searchUsers() {
            const query = document.getElementById('searchInput').value;
            fetch(`/search?q=${encodeURIComponent(query)}`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById('searchResults').innerHTML = 
                        JSON.stringify(data, null, 2);
                });
        }
        
        function pingHost() {
            const host = document.getElementById('pingInput').value;
            fetch(`/ping?host=${encodeURIComponent(host)}`)
                .then(response => response.text())
                .then(data => {
                    document.getElementById('pingResults').innerHTML = 
                        `<pre>${data}</pre>`;
                });
        }
        
        // Try IDOR vulnerability
        fetch('/profile/1')
            .then(response => response.json())
            .then(data => {
                console.log('User 1 data:', data);
            });
    </script>
</body>
</html>